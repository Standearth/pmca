import{q as h,aC as F,aD as D,aE as H,aF as j,aG as B,d as q,p as V,g as E,O as Y,aa as P,o as $,f as T,c as m,t as J,a as I,b as K,h as Z,i as w,j as g,r as y}from"./CMS7xYzi.js";import"./BoGM1SOC.js";import{p as S,i as Q,b as W}from"./CRni-glT.js";let C=!1;function X(){C||(C=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const a of e.target.elements)(t=a.__on_r)==null||t.call(a)})},{capture:!0}))}const L=[...` 	
\r\fÂ \v\uFEFF`];function x(e,t,a){var r=e==null?"":""+e;if(a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,s=0;(s=r.indexOf(o,s))>=0;){var l=s+i;(s===0||L.includes(r[s-1]))&&(l===r.length||L.includes(r[l]))?r=(s===0?"":r.substring(0,s))+r.substring(l+1):s=l}}return r===""?null:r}function ee(e,t,a,r,o,i){var s=e.__className;if(h||s!==a||s===void 0){var l=x(a,r,i);(!h||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):e.className=l),e.__className=a}else if(i&&o!==i)for(var p in i){var c=!!i[p];(o==null||c!==!!o[p])&&e.classList.toggle(p,c)}return i}const te=Symbol("is custom element"),ae=Symbol("is html");function he(e){if(h){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;M(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;M(e,"checked",null),e.checked=o}}};e.__on_r=a,B(a),X()}}function _e(e,t){var a=O(e);a.value===(a.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function M(e,t,a,r){var o=O(e);h&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=a)&&(t==="loading"&&(e[F]=a),a==null?e.removeAttribute(t):typeof a!="string"&&re(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function O(e){return e.__attributes??(e.__attributes={[te]:e.nodeName.includes("-"),[ae]:e.namespaceURI===D})}var N=new Map;function re(e){var t=e.getAttribute("is")||e.nodeName,a=N.get(t);if(a)return a;N.set(t,a=[]);for(var r,o=e,i=Element.prototype;i!==o;){r=j(o);for(var s in r)r[s].set&&a.push(s);o=H(o)}return a}const u=new Map,d=new Map;function oe(e){if(u.has(e))return Promise.resolve(u.get(e));if(d.has(e))return d.get(e);const t=new Promise((a,r)=>{const o=document.createElement("iframe");o.src=e,o.style.display="none",o.style.position="absolute",o.style.left="-9999px",o.style.width="1px",o.style.height="1px",o.onload=()=>{u.set(e,o),d.delete(e),console.log(`Iframe preloaded and cached: ${e}`),a(o)},o.onerror=i=>{d.delete(e),console.error(`Failed to preload iframe: ${e}`,i),r(i)},document.body.appendChild(o),console.log(`Starting iframe preload: ${e}`)});return d.set(e,t),t}function ie(e){return u.get(e)||null}function ne(e,t){if(!t)return null;const a=ie(e);if(a){const r=a.cloneNode(!0);return r.style.display="block",r.style.position="static",r.style.left="auto",r.style.width="100%",r.style.height="100%",r.style.border="none",t.innerHTML="",t.appendChild(r),r}return null}function se(){return{cached:u.size,preloading:d.size,cachedUrls:Array.from(u.keys()),preloadingUrls:Array.from(d.keys())}}const U="G-8SZBSE6Y23";function ve(e=U){if(e)try{let a=function(...r){window.dataLayer.push(r)};if(window.gtag){console.log("Google Analytics already initialized");return}const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=a,t.onload=()=>{a("js",new Date),a("config",e,{send_page_view:!1}),console.log("Google Analytics initialized successfully")},t.onerror=()=>{console.error("Failed to load Google Analytics")}}catch(t){console.error("Error initializing Google Analytics:",t)}}function me(e,t){if(window.gtag)try{window.gtag("config",U,{page_title:e,page_location:t}),window.gtag("event","page_view",{page_title:e,page_location:t})}catch(a){console.error("Error tracking page view:",a)}}function b(e,t={}){if(window.gtag)try{window.gtag("event",e,t)}catch(a){console.error("Error tracking event:",a)}}function le(e){b("popup_opened",{source_page:e,page_location:window.location.href,page_path:window.location.pathname})}function we(e){b("conversion",{event_category:"get_started",event_label:"ref_visit",ref_id:e,page_location:window.location.href,custom_parameters:{conversion_type:"ref_visit",campaign_source:"referral"}})}function ye(e,t=!1,a=null){b("social_share_click",{social_platform:e,has_ref:t,ref_id:a,page_location:window.location.href,page_path:"/get-started"})}function G(e,t){t(!1),document.body.style.overflow="auto"}var ce=e=>e.stopPropagation(),fe=T('<div class="iframe-loading svelte-1lheb99"><p class="svelte-1lheb99">Loading...</p></div>'),de=T('<div><div class="popup-content svelte-1lheb99"><button class="popup-close svelte-1lheb99">&times;</button> <div class="popup-iframe svelte-1lheb99"><!></div></div></div>');function be(e,t){V(t,!0);let a=S(t,"show",15),r=S(t,"baseUrl",3,"https://act.stand.earth/page/88799/petition/1"),o=E(Y(r())),i,s=E(!1);P(()=>{a()&&i&&g(o)&&l()}),P(()=>{if(a()){const n=window.location.pathname;let f="unknown";switch(n){case"/":f="home";break;case"/learn-more":f="learn-more";break;case"/cancel-prime":f="cancel-prime";break;default:f=n.replace("/","")||"home"}le(f)}});function l(){if(!i)return;ne(g(o),i)?(console.log("Using cached iframe for popup"),w(s,!0)):(console.log("Creating fallback iframe for popup"),p())}function p(){if(!i)return;const n=document.createElement("iframe");n.src=g(o),n.title="Join the campaign",n.style.width="100%",n.style.height="100%",n.style.border="none",n.onload=()=>{w(s,!0)},i.innerHTML="",i.appendChild(n)}$(()=>{w(o,`${r()}${window.location.search}`),oe(g(o)).then(()=>{console.log("Popup iframe preloaded successfully")}).catch(n=>{console.error("Failed to preload popup iframe:",n)}),console.log("Iframe cache stats:",se())});var c=de();let k;c.__click=[G,a];var _=m(c);_.__click=[ce];var A=m(_);A.__click=[G,a];var v=Z(A,2),R=m(v);{var z=n=>{var f=fe();I(n,f)};Q(R,n=>{g(s)||n(z)})}y(v),W(v,n=>i=n,()=>i),y(_),y(c),J(n=>k=ee(c,1,"popup-overlay svelte-1lheb99",null,k,n),[()=>({show:a()})]),I(e,c),K()}q(["click"]);export{be as P,ee as a,we as b,_e as c,me as d,ve as i,he as r,M as s,ye as t};
